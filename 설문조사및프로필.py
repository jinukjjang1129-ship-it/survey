import streamlit as st
import random
import matplotlib.pyplot as plt

import matplotlib as mpl
import matplotlib.font_manager as fm
from pathlib import Path
FONT_PATH = r"C:\Users\jinuk\Freesentation-6SemiBold.ttf"
FP = fm.FontProperties(fname=FONT_PATH)

st.markdown("""
<style>
/* ì„¤ë¬¸ ì§ˆë¬¸ ê¸€ì”¨ */
div[data-testid="stRadio"] > label {
    font-size: 20px;
    font-weight: 500;
}

/* ê²°ê³¼ ì œëª© */
h1, h2, h3 {
    font-size: 32px !important;
}

/* ê²°ê³¼ ì„¤ëª… ë³¸ë¬¸ */
div[data-testid="stMarkdownContainer"] p {
    font-size: 20px;
    line-height: 1.6;
}
</style>
""", unsafe_allow_html=True)

st.markdown("""
<style>
/* ë¼ë””ì˜¤ ì „ì²´(ë¬¸í•­) í…ìŠ¤íŠ¸ í¬ê¸° */
div[data-testid="stRadio"] label {
    font-size: 20px !important;
}

/* ë¼ë””ì˜¤ ì˜µì…˜(1~7) ìˆ«ì í¬ê¸° */
div[data-testid="stRadio"] div[role="radiogroup"] label span {
    font-size: 30px !important;
}

/* ë¼ë””ì˜¤ ë™ê·¸ë¼ë¯¸(ì„ íƒ ì›) í¬ê¸° */
div[data-testid="stRadio"] div[role="radiogroup"] label {
    transform: scale(1.15);
    margin-right: 60px;
}
</style>
""", unsafe_allow_html=True)


# -----------------------------
# ì„¤ì •
# -----------------------------
CUT = 4.0  # 1~7 ë¦¬ì»¤íŠ¸ì—ì„œ High/Low ì»·ì˜¤í”„(í”„ë¡œí† íƒ€ì…ìš©)

def rev7(x: int) -> int:
    return 8 - x

def mean(xs):
    return sum(xs) / len(xs) if xs else 4.0

def to_pct(score_1_7: float) -> float:
    # 1~7 -> 0~100
    return (score_1_7 - 1) / 6 * 100
def go_result():
    st.session_state.page = "result"
    st.experimental_set_query_params(scroll="top")  # â­ í•µì‹¬
    st.rerun()

# -----------------------------
# í…ŒìŠ¤íŠ¸ìš© TYPE_DB (ì¼ë¶€ë§Œ ë“±ë¡ + fallback)
# -----------------------------
TYPE_DB = {
    # 1
    ("ì•ˆì •í˜•", "í‘œí˜„í˜•", "ë†’ìŒ"): {
        "emoji": "ğŸ¦¦",
        "name": "ë”°ëœ»í•œ ìˆ˜ë‹¬",
        "headline": "ì•ˆì •í˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "ì´ ìœ í˜•ì€ ìì‹ ê³¼ íƒ€ì¸ì„ ëª¨ë‘ ê¸ì •ì ìœ¼ë¡œ ë³´ë©°, ê°ì •ì„ ìì—°ìŠ¤ëŸ½ê²Œ í‘œí˜„í•˜ëŠ” í¸ì´ì—ìš”. "
            "ìì‹ ì˜ ëŠ¥ë ¥ì— ëŒ€í•œ í™•ì‹ ë„ ìˆì–´ ê´€ê³„ì™€ ëª©í‘œ ëª¨ë‘ì—ì„œ ì•ˆì •ì ì¸ ê¸°ë°˜ì„ ê°€ì§€ê³  ì›€ì§ì…ë‹ˆë‹¤.\n\n"
            "ëˆ„êµ°ê°€ì™€ í•¨ê»˜í•  ë•Œ í¸ì•ˆí•¨ì„ ì£¼ê³ , ê°ˆë“±ì´ ë°œìƒí•´ë„ ê³¼ë„í•˜ê²Œ í”ë“¤ë¦¬ì§€ ì•Šì•„ìš”. "
            "ê°ì •ì„ ìˆ¨ê¸°ê¸°ë³´ë‹¤ ë§¥ë½ì„ ì„¤ëª…í•˜ë©° ì°¨ë¶„íˆ ì¡°ìœ¨í•˜ë ¤ëŠ” íƒœë„ê°€ ê°•í•´, ì£¼ë³€ì—ì„œë„ ì‹ ë¢°ë¥¼ ì‰½ê²Œ ì–»ëŠ” í¸ì…ë‹ˆë‹¤.\n\n"
            "ì–´ë ¤ì›€ì´ ì™€ë„ íšŒí”¼í•˜ê¸°ë³´ë‹¤ í•´ê²°ì„ í–¥í•´ ì ‘ê·¼í•˜ê³ , â€œí•  ìˆ˜ ìˆë‹¤â€ëŠ” ë¯¿ìŒìœ¼ë¡œ ì¡°ìš©íˆ ì§€ì†í•´ ë‚˜ê°‘ë‹ˆë‹¤. "
            "ê´€ê³„ì—ì„œë„ ê³¼ë„í•œ ê¸°ëŒ€ë‚˜ ì˜ì¡´ ì—†ì´ ìì—°ìŠ¤ëŸ½ê²Œ ì¹œë°€ê°ì„ ìŒ“ì•„ê°€ëŠ” ê²ƒì´ íŠ¹ì§•ì´ì—ìš”.\n\n"
            "ì´ ìœ í˜•ì€ íƒ€ê³ ë‚œ ê· í˜•ê°ì´ ìˆì§€ë§Œ, ëª¨ë“  ìƒí™©ì„ ìŠ¤ìŠ¤ë¡œ ì •ë¦¬í•˜ë ¤ í•˜ê¸°ë³´ë‹¤ ë•Œë•Œë¡œ ì£¼ë³€ì˜ ë„ì›€ì„ ë°›ì•„ë“¤ì´ë©´ "
            "ë” ì—¬ìœ ë¡œìš´ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”."
        )
    },

    # 2
    ("ì•ˆì •í˜•", "í‘œí˜„í˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ‘",
        "name": "ì”ì”í•œ ì–‘",
        "headline": "ì•ˆì •í˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "ê°ì •ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë“œëŸ¬ë‚´ë©° ê´€ê³„ë¥¼ ì†Œì¤‘í•˜ê²Œ ì—¬ê¸°ì§€ë§Œ, ìê¸°íš¨ëŠ¥ê°ì´ ë‚®ì•„ ìƒˆë¡œìš´ ìƒí™© ì•ì—ì„œëŠ” "
            "ìì‹ ê°ì´ í”ë“¤ë¦´ ë•Œê°€ ìˆì–´ìš”. íƒ€ì¸ì— ëŒ€í•œ ì‹ ë¢°ëŠ” ë†’ì•„ í¸ì•ˆí•œ ê´€ê³„ë¥¼ ë§Œë“¤ì§€ë§Œ, "
            "ì •ì‘ ìì‹ ì´ í•  ìˆ˜ ìˆì„ì§€ì— ëŒ€í•´ì„œëŠ” ì¡°ì‹¬ìŠ¤ëŸ½ìŠµë‹ˆë‹¤.\n\n"
            "ê¸ì •ì  ê´€ê³„ ê²½í—˜ì´ ë§ì•„ ì‚¬ëŒì—ê²Œ ë”°ëœ»í•˜ê²Œ ë‹¤ê°€ê°€ì§€ë§Œ, ë„ì „ì  ìƒí™©ì—ì„œëŠ” â€œë‚´ê°€ í•´ë‚¼ ìˆ˜ ìˆì„ê¹Œâ€ë¼ëŠ” "
            "ì˜ë¬¸ì´ ë¨¼ì € ë– ì˜¤ë¥´ê³¤ í•´ìš”. ê·¸ëŸ¼ì—ë„ ê°ì • í‘œí˜„ì€ ì•ˆì •ì ì´ë¼, ê´€ê³„ì—ì„œëŠ” ë¶€ë“œëŸ½ê³  ì¼ê´€ëœ ë¶„ìœ„ê¸°ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.\n\n"
            "ìì‹ ì„ ê²©ë ¤í•˜ëŠ” ëª©ì†Œë¦¬ê°€ ì¡°ê¸ˆ ë” ê°•í™”ë˜ë©´ í–‰ë™ í­ì´ ë„“ì–´ì§€ê³  ì„±ì·¨ ê²½í—˜ì´ ìŒ“ì´ëŠ” ì†ë„ê°€ ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”. "
            "íƒ€ì¸ì˜ ì§€ì§€ëŠ” ì´ ìœ í˜•ì— í° í˜ìœ¼ë¡œ ì‘ìš©í•©ë‹ˆë‹¤."
        )
    },

    # 3
    ("ì•ˆì •í˜•", "ì–µì œí˜•", "ë†’ìŒ"): {
        "emoji": "ğŸ»",
        "name": "ìˆ²ì„ ì§€í‚¤ëŠ” ê³°",
        "headline": "ì•ˆì •í˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "ê°ì • í‘œí˜„ì€ ì ˆì œí•˜ëŠ” í¸ì´ì§€ë§Œ ìê¸° ìì‹ ì— ëŒ€í•œ ì‹ ë¢°ì™€ íƒ€ì¸ì— ëŒ€í•œ ê¸ì •ì  ê´€ì ì´ íƒ„íƒ„í•©ë‹ˆë‹¤. "
            "ë§ì€ ë§ì§€ ì•Šì•„ë„ í–‰ë™ê³¼ ê³„íšì—ì„œ ì•ˆì •ê°ì„ ë³´ì—¬ì£¼ë©°, í•„ìš”í•  ë•Œ ì¹¨ì°©í•˜ê²Œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥ì´ ë‹ë³´ì…ë‹ˆë‹¤.\n\n"
            "ê°ì •ì´ í¬ê²Œ í”ë“¤ë¦¬ëŠ” ì¼ì´ ì ê³ , ê°ˆë“± ìƒí™©ì—ì„œë„ ì„œë‘˜ëŸ¬ ê°ì •ì„ ë“œëŸ¬ë‚´ê¸°ë³´ë‹¤ ìƒí™©ì„ ë¨¼ì € ë¶„ì„í•´ìš”. "
            "ìŠ¤ìŠ¤ë¡œ í•´ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ë¯¿ìŒì´ ê°•í•˜ê¸° ë•Œë¬¸ì— ì–´ë ¤ìš´ ê³¼ì œì—ë„ ì‰½ê²Œ ë¬¼ëŸ¬ì„œì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n"
            "ë‹¤ë§Œ ê°ì •ì„ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì„œíˆ´ëŸ¬ ì˜¤í•´ë¥¼ ì‚´ ë•Œê°€ ìˆì–´ìš”. ê°ì •ì„ ì¡°ê¸ˆë§Œ ë” ë‚˜ëˆ„ë©´ ê´€ê³„ì˜ ê¹Šì´ê°€ í›¨ì”¬ í’ë¶€í•´ì§‘ë‹ˆë‹¤."
        )
    },

    # 4
    ("ì•ˆì •í˜•", "ì–µì œí˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ¦Š",
        "name": "ë°”ëŒì„ ì§€ì¼œë³´ëŠ” ì‚¬ë§‰ì—¬ìš°",
        "headline": "ì•ˆì •í˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "íƒ€ì¸ì— ëŒ€í•œ ì‹ ë¢°ëŠ” ìˆì§€ë§Œ ìì‹ ì˜ ëŠ¥ë ¥ì— ëŒ€í•´ì„œëŠ” ì¡°ì‹¬ìŠ¤ëŸ¬ìš´ ë©´ì´ ìˆì–´ìš”. "
            "ê°ì •ì„ ì–µì œí•˜ë©° í˜¼ì í•´ê²°í•˜ë ¤ëŠ” ê²½í–¥ì´ ê°•í•´, ì£¼ë³€ì—ì„œëŠ” ì°¨ë¶„í•˜ê³  ì•ˆì •ì ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.\n\n"
            "ê·¸ëŸ¬ë‚˜ ë‚´ë©´ì—ì„œëŠ” â€œì‹¤íŒ¨í•˜ë©´ ì–´ì©Œì§€â€ ê°™ì€ ê³ ë¯¼ì´ ì¡°ìš©íˆ ë¨¸ë¬´ë¦…ë‹ˆë‹¤. "
            "ì¹œë°€í•œ ê´€ê³„ì—ì„œëŠ” ìƒëŒ€ë¥¼ í¸ì•ˆí•˜ê²Œ ëŒ€í•˜ì§€ë§Œ, ìì‹ ì˜ ì•½ì ì„ ë“œëŸ¬ë‚´ëŠ” ë°ì—ëŠ” ë§ì„¤ì„ì´ ìˆì–´ìš”.\n\n"
            "ê³¼ì œë¥¼ ì„ íƒí•  ë•Œ ì•ˆì „í•œ ì„ íƒì„ ì„ í˜¸í•˜ë©°, ìŠ¤ìŠ¤ë¡œë¥¼ ê²©ë ¤í•  ê³„ê¸°ê°€ ë§ì§€ ì•Šìœ¼ë©´ í–‰ë™ í­ì´ ì¢ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”. "
            "ì ì§„ì ì¸ ì„±ê³µ ê²½í—˜ì„ ìŒ“ìœ¼ë©´ ìì‹ ê°ì´ í¬ê²Œ ìƒìŠ¹í•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤."
        )
    },

    # 5
    ("ë¶ˆì•ˆí˜•", "í‘œí˜„í˜•", "ë†’ìŒ"): {
        "emoji": "ğŸ¹",
        "name": "ë¯¼ê°í•œ ê·€ì—¼ë‘¥ì´ í–„ìŠ¤í„°",
        "headline": "ë¶ˆì•ˆí˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "ê°ì • í­ì´ ë„“ê³  ë°˜ì‘ì´ ë¹ ë¥´ì§€ë§Œ, ìê¸°íš¨ëŠ¥ê°ì´ ë†’ì•„ ë¶ˆì•ˆì´ ìƒê²¨ë„ ê¸ˆì„¸ ë°©í–¥ì„ ì¡ìœ¼ë ¤ í•´ìš”. "
            "íƒ€ì¸ì˜ ì¸ì •ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ë©´ì„œë„, ìŠ¤ìŠ¤ë¡œ í•´ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ë¯¿ìŒì´ ìˆì–´ í–‰ë™ì€ ê³¼ê°í•œ í¸ì…ë‹ˆë‹¤.\n\n"
            "ê´€ê³„ì— ëª°ì…í•˜ëŠ” ì†ë„ê°€ ë¹ ë¥´ê³  ì• ì • í‘œí˜„ë„ ê°•í•˜ì§€ë§Œ, ë™ì‹œì— ê¸°ëŒ€ê°€ ì¶©ì¡±ë˜ì§€ ì•Šìœ¼ë©´ ìˆœì‹ê°„ì— ë§ˆìŒì´ í”ë“¤ë¦¬ê¸°ë„ í•´ìš”. "
            "ë‹¤ë§Œ íš¨ëŠ¥ê°ì´ ë†’ê¸° ë•Œë¬¸ì— ë¶ˆì•ˆì„ í–‰ë™ìœ¼ë¡œ ì „í™˜ì‹œí‚¤ëŠ” í˜ì´ ìˆì–´, ê´€ê³„ë‚˜ ëª©í‘œ ëª¨ë‘ì—ì„œ ì¶”ì§„ë ¥ì´ ê°•í•©ë‹ˆë‹¤.\n\n"
            "ì´ ìœ í˜•ì€ ê°ì •ì˜ ë¯¼ê°ì„±ì„ ë‹¨ì ì´ ì•„ë‹Œ â€˜ì—°ê²°ì˜ ëŠ¥ë ¥â€™ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆì–´ìš”."
        )
    },

    # 6
    ("ë¶ˆì•ˆí˜•", "í‘œí˜„í˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ¦",
        "name": "ê°ì • ë§ì€ ì°¸ìƒˆ",
        "headline": "ë¶ˆì•ˆí˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "ì´ ìœ í˜•ì€ ê°ì •ì˜ í­ì´ ë„“ê³  ë³€í™”ê°€ ë¹ ë¥¸ í¸ì´ì—ìš”. ê¸°ìœ ì¼ì—ëŠ” ê¸ˆë°© ì„¤ë ˆê³ , ì‘ì€ ìƒì²˜ì—ë„ ë§ˆìŒì´ í¬ê²Œ ì›€ì§ì¼ ìˆ˜ ìˆì–´ìš”. "
            "ê´€ê³„ì™€ ì¸ì •ì— ëŒ€í•œ ìš•êµ¬ê°€ ê°•í•˜ì§€ë§Œ, ë™ì‹œì— ìê¸° ìì‹ ì— ëŒ€í•œ í™•ì‹ ì´ ì•½í•´ ì‰½ê²Œ í”ë“¤ë¦´ ë•Œê°€ ë§ì•„ìš”.\n\n"
            "ë‚´ë©´ì—ì„œëŠ” â€œìƒëŒ€ê°€ ë‚˜ë¥¼ ì–´ë–»ê²Œ ìƒê°í• ê¹Œâ€¦â€ í•˜ëŠ” ê³ ë¯¼ì´ ìì£¼ ë– ì˜¬ë¼ìš”. ê·¸ë˜ì„œ ìƒëŒ€ì˜ ë§íˆ¬ë‚˜ ë°˜ì‘ì„ ê³¼í•˜ê²Œ í•´ì„í•˜ëŠ” ìˆœê°„ì´ ìˆê³ , "
            "ì´ëŸ° ë¶ˆì•ˆì´ ê°ì • í‘œí˜„ì„ ë”ìš± ê°•í•˜ê²Œ ë§Œë“¤ê¸°ë„ í•´ìš”. í‘œí˜„ì€ ì†”ì§í•˜ê³  ë”°ëœ»í•˜ì§€ë§Œ, ë§ˆìŒì†ì—ì„œëŠ” ê³„ì†í•´ì„œ â€˜ê´œì°®ì„ê¹Œ?â€™ë¥¼ í™•ì¸í•˜ê³  ìˆëŠ” ê²½ìš°ê°€ ë§ì•„ìš”.\n\n"
            "ê´€ê³„ì—ì„œëŠ” ì• ì • í‘œí˜„ì´ í’ë¶€í•˜ê³  ìƒëŒ€ì—ê²Œ ì •ì„œì ìœ¼ë¡œ ëª°ì…í•˜ëŠ” í¸ì´ë¼ ê°€ê¹Œì›Œì§€ëŠ” ì†ë„ë„ ë¹¨ë¼ìš”. í•˜ì§€ë§Œ ê¸°ëŒ€ê°€ ì–´ê¸‹ë‚˜ë©´ ê¸ˆì„¸ ë§ˆìŒì´ ë‚´ë ¤ì•‰ì„ ìˆ˜ ìˆì–´ìš”. "
            "ì´í›„ì—ëŠ” â€œë‚´ê°€ ë„ˆë¬´ ì˜ˆë¯¼í–ˆë‚˜â€ë¼ëŠ” ìì±…ì´ ë’¤ë”°ë¥´ê³¤ í•´ìš”.\n\n"
            "ì´ ìœ í˜•ì˜ ì¥ì ì€ ê°ì •ì„ ê¹Šì´ ëŠë¼ê³  ì§„ì‹¬ìœ¼ë¡œ ê´€ê³„ë¥¼ ëŒ€í•œë‹¤ëŠ” ì ì´ì—ìš”. ë‹¤ë§Œ ìê¸° ìì‹ ì„ ë‚®ê²Œ í‰ê°€í•˜ëŠ” ìŠµê´€ì´ ê´€ê³„ì˜ ì•ˆì •ê°ì„ í•´ì¹  ìˆ˜ ìˆì–´, "
            "ìŠ¤ìŠ¤ë¡œë¥¼ ê²©ë ¤í•˜ëŠ” ì—°ìŠµì´ ë„ì›€ì´ ë¼ìš”."
        )
    },

    # 7
    ("ë¶ˆì•ˆí˜•", "ì–µì œí˜•", "ë†’ìŒ"): {
        "emoji": "ğŸ¦Œ",
        "name": "ê³ ìš”í•œ ì‚¬ìŠ´",
        "headline": "ë¶ˆì•ˆí˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "ê°ì •ì€ ì˜ˆë¯¼í•˜ê²Œ ëŠë¼ì§€ë§Œ ë“œëŸ¬ë‚´ì§€ ì•Šê³ , ë¶ˆì•ˆì´ ìƒê²¨ë„ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•´ ë³´ë ¤ëŠ” ì„±í–¥ì´ ê°•í•©ë‹ˆë‹¤. "
            "íš¨ëŠ¥ê°ì´ ë†’ì•„ ë¬¸ì œë¥¼ íšŒí”¼í•˜ê¸°ë³´ë‹¤ ì •ë©´ìœ¼ë¡œ ë‹¤ë£¨ë ¤ í•˜ì§€ë§Œ, ê°ì • í‘œí˜„ì˜ ì–µì œ ë•Œë¬¸ì— ê´€ê³„ì—ì„œëŠ” ì–´ìƒ‰í•œ ê±°ë¦¬ê°ì´ ìƒê¸°ê¸°ë„ í•´ìš”.\n\n"
            "íƒ€ì¸ì˜ ë§ì´ë‚˜ í‘œì •ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ì§€ë§Œ ê·¸ëŒ€ë¡œ í‘œí˜„í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ë‚´ì  ê¸´ì¥ê³¼ ì™¸ì  ì¹¨ì°©í•¨ ì‚¬ì´ì˜ ê°„ê·¹ì´ ì¡´ì¬í•©ë‹ˆë‹¤.\n\n"
            "ê´€ê³„ì—ì„œ ì•ˆì •ê°ì„ ì–»ê¸° ìœ„í•´ ì• ì“°ì§€ë§Œ, ë¶ˆì•ˆì„ ë“¤í‚¤ê³  ì‹¶ì§€ ì•Šì•„ ìŠ¤ìŠ¤ë¡œ ê±°ë¦¬ë¥¼ ë§Œë“œëŠ” ìˆœê°„ì´ ì¦ìŠµë‹ˆë‹¤. "
            "ê°ì •ì„ ì¡°ê¸ˆ ë” ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ì—°ìŠµì´ í° ë„ì›€ì´ ë¼ìš”."
        )
    },

    # 8
    ("ë¶ˆì•ˆí˜•", "ì–µì œí˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ±",
        "name": "ìˆ¨ì–´ ìˆëŠ” ê³ ì–‘ì´",
        "headline": "ë¶ˆì•ˆí˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "ìê¸°ê¸ì •ì´ ë‚®ê³  íƒ€ì¸ì— ë¯¼ê°í•˜ì§€ë§Œ, ë™ì‹œì— ê°ì •ì„ ì–µì œí•˜ëŠ” ê²½í–¥ì´ ìˆì–´ìš”. ë¶ˆì•ˆì€ í¬ì§€ë§Œ í‘œí˜„ ë°©ì‹ì€ ì¡°ìš©í•´ ë‚´ë¶€ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì˜¤ë˜ ìŒ“ì…ë‹ˆë‹¤.\n\n"
            "ì‚¬ëŒì´ ê°€ê¹Œì›Œì§€ë©´ ê¸°ëŒ€ì™€ ë¶ˆì•ˆì´ ë™ì‹œì— ì˜¬ë¼ì˜¤ëŠ”ë°, ê·¸ ê°ì •ì„ ë“œëŸ¬ë‚´ê¸° ì–´ë ¤ì›Œ ìŠ¤ìŠ¤ë¡œ ê´€ê³„ë¥¼ ëŠê±°ë‚˜ íšŒí”¼í•˜ëŠ” ì¼ì´ ë°˜ë³µë  ìˆ˜ ìˆì–´ìš”.\n\n"
            "íš¨ëŠ¥ê°ì´ ë‚®ì•„ ë„ì „ì  ìƒí™©ì—ì„œëŠ” ìœ„ì¶•ë˜ê¸° ì‰½ê³ , íƒ€ì¸ì˜ ì„±ê³µì„ ë³´ë©° ìì‹ ì„ ë” ì‘ê²Œ ëŠë¼ê³¤ í•©ë‹ˆë‹¤.\n\n"
            "ì´ ìœ í˜•ì€ ê°ì •ì„ ì•ˆì „í•˜ê²Œ ë‚˜ëˆ„ê³ , â€˜ì‘ì€ ì„±ì·¨ ê²½í—˜â€™ì„ ë°˜ë³µì ìœ¼ë¡œ ìŒ“ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•´ìš”."
        )
    },

    # 9
    ("íšŒí”¼í˜•", "í‘œí˜„í˜•", "ë†’ìŒ"): {
        "emoji": "ğŸº",
        "name": "ë– ëŒì´ ëŠ‘ëŒ€",
        "headline": "íšŒí”¼í˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "ê°ì • í‘œí˜„ì€ ìì—°ìŠ¤ëŸ½ì§€ë§Œ íƒ€ì¸ì— ëŒ€í•œ ì‹ ë¢°ê°€ ë‚®ì•„ ê¹Šì€ ê´€ê³„ì—ëŠ” ì‰½ê²Œ ë“¤ì–´ê°€ì§€ ì•ŠëŠ” ìœ í˜•ì´ì—ìš”. "
            "ìŠ¤ìŠ¤ë¡œì˜ ëŠ¥ë ¥ì— ëŒ€í•œ í™•ì‹ ì€ ë†’ì•„ í˜¼ìì„œë„ ë§ì€ ê²ƒì„ í•´ê²°í•©ë‹ˆë‹¤.\n\n"
            "í‘œë©´ì ìœ¼ë¡œëŠ” ì¹œê·¼í•˜ê³  ìœ ì—°í•˜ì§€ë§Œ, ê´€ê³„ê°€ ì¼ì • ìˆ˜ì¤€ ì´ìƒ ê°€ê¹Œì›Œì§€ë©´ ê°‘ìê¸° ê±°ë¦¬ë¥¼ ë‘ëŠ” ëª¨ìŠµì„ ë³´ì´ê¸°ë„ í•´ìš”. "
            "ì´ëŠ” ì¹œë°€ê°ì´ ê°€ì ¸ì˜¬ ê°€ëŠ¥ì„±ì„ ê²½ê³„í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\n"
            "ë‚´ë©´ì—ì„œëŠ” â€œë„ˆë¬´ ê°€ê¹Œì›Œì§€ë©´ ë¶€ë‹´ì´ ìƒê¸°ì§€ ì•Šì„ê¹Œâ€ í•˜ëŠ” ìƒê°ì´ ë°˜ë³µë©ë‹ˆë‹¤.\n\n"
            "ì´ ìœ í˜•ì€ ê´€ê³„ë¥¼ ëŠê¸°ë³´ë‹¤ ê²½ê³„ë¥¼ ìŠ¤ìŠ¤ë¡œ ì¡°ì ˆí•˜ë ¤ëŠ” ë°©ì‹ì„ ìµíˆë©´ ì‚¶ì˜ ê· í˜•ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤."
        )
    },

    # 10
    ("íšŒí”¼í˜•", "í‘œí˜„í˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ¨",
        "name": "í•˜í’ˆí•˜ëŠ” ì½”ì•Œë¼",
        "headline": "íšŒí”¼í˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "ê°ì •ì„ í‘œí˜„í•˜ëŠ” í¸ì´ì§€ë§Œ íƒ€ì¸ì— ëŒ€í•œ ì‹ ë¢°ê°€ ë‚®ê³ , ìê¸°íš¨ëŠ¥ê°ë„ ë‚®ì•„ ê´€ê³„ì™€ ë„ì „ ëª¨ë‘ì— ë¶ˆì•ˆì´ ì„ì—¬ ìˆì–´ìš”. "
            "ê²‰ìœ¼ë¡œëŠ” ë¶€ë“œëŸ½ê²Œ ì´ì•¼ê¸°í•˜ì§€ë§Œ ë‚´ë©´ì€ ì‰½ê²Œ ìœ„ì¶•ë˜ê±°ë‚˜ ê²½ê³„ì‹¬ì´ ì˜¬ë¼ì˜µë‹ˆë‹¤.\n\n"
            "ê´€ê³„ê°€ ê¹Šì–´ì§€ëŠ” ìˆœê°„ ë¶ˆì•ˆê³¼ íšŒí”¼ê°€ ë™ì‹œì— ë°œìƒí•´ ìƒëŒ€ë¥¼ í˜¼ë€ìŠ¤ëŸ½ê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.\n\n"
            "ì²œì²œíˆ ì•ˆì •ì ì¸ ì„±ê³µê²½í—˜ê³¼ íƒ€ì¸ì˜ ì§€ì§€ ê²½í—˜ì„ ìŒ“ì•„ê°€ëŠ” ê²ƒì´ ì´ ìœ í˜•ì—ê²Œ í° ë³€í™”ì˜ ê³„ê¸°ê°€ ë©ë‹ˆë‹¤."
        )
    },

    # 11
    ("íšŒí”¼í˜•", "ì–µì œí˜•", "ë†’ìŒ"): {
        "emoji": "ğŸ†",
        "name": "ë…ë¦½ì ì¸ í‘œë²”",
        "headline": "íšŒí”¼í˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "í‘œí˜„ì€ ì ˆì œí•˜ê³ , ê´€ê³„ëŠ” ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ìœ ì§€í•˜ì§€ë§Œ, ìŠ¤ìŠ¤ë¡œì˜ ëŠ¥ë ¥ì— ëŒ€í•œ í™•ì‹ ì€ ë†’ì•„ìš”. "
            "íƒ€ì¸ì„ ì‹ ë¢°í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— ëŒ€ë¶€ë¶„ì˜ ë¬¸ì œë¥¼ â€˜í˜¼ì í•´ê²°í•˜ëŠ” ë°©ì‹â€™ìœ¼ë¡œ ì ‘ê·¼í•©ë‹ˆë‹¤.\n\n"
            "ê²‰ìœ¼ë¡œëŠ” ì¹¨ì°©í•˜ë©° íš¨ìœ¨ì ì´ì§€ë§Œ, ê°ì •ì  ì£¼ì œë¥¼ íšŒí”¼í•˜ëŠ” ê²½í–¥ì´ ìˆì–´ ì¹œë°€í•œ ê´€ê³„ì—ì„œ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n"
            "ê°ì •ì„ ë“œëŸ¬ë‚´ëŠ” ê²ƒì´ ì•½ì ì´ë¼ëŠ” ì‹ ë…ì„ ë‚´ë ¤ë†“ëŠ” ìˆœê°„, ê´€ê³„ì˜ ì§ˆì´ í¬ê²Œ ë‹¬ë¼ì§‘ë‹ˆë‹¤."
        )
    },

    # 12
    ("íšŒí”¼í˜•", "ì–µì œí˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ¢",
        "name": "ë°”ìœ„ í‹ˆì˜ ê±°ë¶",
        "headline": "íšŒí”¼í˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "ìì‹ ì— ëŒ€í•œ í™•ì‹ ì´ ë‚®ê³  íƒ€ì¸ì„ ì‰½ê²Œ ì‹ ë¢°í•˜ì§€ ì•Šì•„, ê´€ê³„ì™€ ë„ì „ ëª¨ë‘ì—ì„œ ë§¤ìš° ì¡°ì‹¬ìŠ¤ëŸ½ìŠµë‹ˆë‹¤. "
            "ê°ì •ì„ ì–µì œí•˜ëŠ” ê²½í–¥ë„ ê°•í•´ ì£¼ë³€ì—ì„œëŠ” ì¡°ìš©í•˜ê³  ì•ˆì •ì ìœ¼ë¡œ ë³´ì´ì§€ë§Œ, ë‚´ë©´ì—ì„œëŠ” ë¶ˆì•ˆì´ ì§€ì†ë©ë‹ˆë‹¤.\n\n"
            "ìƒˆë¡œìš´ ì‹œë„ë‚˜ ì¹œë°€ê°ì´ ë†’ì€ ìƒí™©ì—ì„œëŠ” íšŒí”¼ í–‰ë™ì´ ë¹ ë¥´ê²Œ ì¼ì–´ë‚©ë‹ˆë‹¤.\n\n"
            "ì´ ìœ í˜•ì€ ì‘ì€ êµ¬ì¡°í™”ëœ ëª©í‘œë¶€í„° ì ‘ê·¼í•´ ì„±ê³µê²½í—˜ì„ ìŒ“ê³ , ì•ˆì „í•œ ì¸ê°„ê´€ê³„ë¥¼ í™•ë³´í•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ì—ìš”."
        )
    },

    # 13
    ("ê±°ë¶€í˜•", "í‘œí˜„í˜•", "ë†’ìŒ"): {
        "emoji": "ğŸ¦…",
        "name": "ëŒ€ë‹´í•œ ë§¤",
        "headline": "ê±°ë¶€í˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "ìê¸° ìì‹ ì— ëŒ€í•œ ë¯¿ìŒì€ ê°•í•˜ì§€ë§Œ íƒ€ì¸ì„ ê¹Šì´ ì‹ ë¢°í•˜ì§€ ì•Šì•„ìš”. "
            "ê°ì • í‘œí˜„ì€ ë¹„êµì  ìì—°ìŠ¤ëŸ½ì§€ë§Œ, ê´€ê³„ ìì²´ë¥¼ ì‚¶ì˜ ì¤‘ìš”í•œ ìš”ì†Œë¡œ ë³´ì§€ ì•ŠëŠ” í¸ì…ë‹ˆë‹¤.\n\n"
            "ë…ë¦½ì„±ì„ ë§¤ìš° ì¤‘ìš”í•˜ê²Œ ì—¬ê¸°ë©° ëˆ„êµ¬ì—ê²Œë„ ì˜ì¡´í•˜ê³  ì‹¶ì–´í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ëŒ€ì¸ê´€ê³„ëŠ” ê°€ë³ê³  ë„“ì€ í˜•íƒœë¡œ ìœ ì§€ë©ë‹ˆë‹¤.\n\n"
            "ê°ˆë“±ì´ ìƒê¸°ë©´ ì°¨ë¶„íˆ ì„¤ëª…í•˜ê¸°ëŠ” í•˜ì§€ë§Œ, ê¹Šì€ ì •ì„œ êµë¥˜ëŠ” ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ ë’·ê±¸ìŒì§ˆì¹  ìˆ˜ ìˆì–´ìš”."
        )
    },

    # 14
    ("ê±°ë¶€í˜•", "í‘œí˜„í˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ¦â€â¬›",
        "name": "ìƒˆë²½ ê¹Œë§ˆê·€",
        "headline": "ê±°ë¶€í˜• Â· í‘œí˜„í˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "ê°ì • í‘œí˜„ì€ ìì—°ìŠ¤ëŸ½ì§€ë§Œ ìê¸°íš¨ëŠ¥ê°ì´ ë‚®ì•„ ì‹œë„Â·ë„ì „ì— ì•½í•´ìš”. "
            "íƒ€ì¸ì„ í¬ê²Œ ì‹ ë¢°í•˜ì§€ ì•Šì•„ ê´€ê³„ëŠ” ëŠìŠ¨í•˜ê²Œ ìœ ì§€í•˜ëŠ” í¸ì…ë‹ˆë‹¤.\n\n"
            "ë„ì „ì  ìƒí™©ì—ì„œëŠ” â€œë‚´ê°€ í•´ë„ ì˜ ì•ˆ ë  ê²ƒ ê°™ë‹¤â€ëŠ” ìƒê°ì´ ë¨¼ì € ë– ì˜¤ë¥´ì§€ë§Œ, ê°ì •ì„ ì™„ì „íˆ ìˆ¨ê¸°ì§„ ì•Šì•„ ì£¼ë³€ê³¼ ì†Œí†µì€ ì›í™œí•©ë‹ˆë‹¤.\n\n"
            "ë‹¤ë§Œ ê´€ê³„ì˜ ê¹Šì´ë¥¼ ë‚®ê²Œ ìœ ì§€í•˜ë ¤ í•˜ê¸° ë•Œë¬¸ì—, ëˆ„êµ°ê°€ ë‹¤ê°€ì˜¤ë©´ ì¼ì •ì„ ì—ì„œ í•œë°œ ë¬¼ëŸ¬ì„œë©° ì•ˆì •ê°ì„ í™•ë³´í•˜ë ¤ í•©ë‹ˆë‹¤."
        )
    },

    # 15
    ("ê±°ë¶€í˜•", "ì–µì œí˜•", "ë†’ìŒ"): {
        "emoji": "ğŸˆâ€â¬›",
        "name": "ê³ ë…í•œ ì „ëµê°€ í‘í˜¸",
        "headline": "ê±°ë¶€í˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë†’ìŒ",
        "desc": (
            "ê°ì •ì„ ê±°ì˜ ë“œëŸ¬ë‚´ì§€ ì•Šê³  ìŠ¤ìŠ¤ë¡œë¥¼ ì§€íƒ±í•˜ëŠ” í˜ì´ ê°•í•´ìš”. "
            "íƒ€ì¸ì— ëŒ€í•œ ê¸°ë³¸ì  ë¶ˆì‹  ë•Œë¬¸ì— ë„ì›€ì„ ìš”ì²­í•˜ê¸°ë³´ë‹¤ í˜¼ì ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ë ¤ëŠ” ê²½í–¥ì´ ê°•í•©ë‹ˆë‹¤.\n\n"
            "íš¨ëŠ¥ê°ì´ ë†’ì•„ ëª©í‘œë¥¼ ì„¤ì •í•˜ë©´ ê¾¸ì¤€íˆ ì´í–‰í•˜ì§€ë§Œ, ì •ì„œì  êµë¥˜ë‚˜ ê´€ê³„ ê¹Šì–´ì§ì—ëŠ” ê±°ë¦¬ë‘ê¸°ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\n\n"
            "ê°ì • í‘œí˜„ì„ ì¡°ê¸ˆë§Œ í—ˆìš©í•˜ë©´ ì£¼ë³€ê³¼ì˜ ì—°ê²°ì´ í›¨ì”¬ ë¶€ë“œëŸ¬ì›Œì§€ê³  ì‚¶ì˜ í”¼ë¡œê°ë„ ì¤„ì–´ë“¤ì–´ìš”."
        )
    },

    # 16
    ("ê±°ë¶€í˜•", "ì–µì œí˜•", "ë‚®ìŒ"): {
        "emoji": "ğŸ¦‰",
        "name": "ê³ ëª© ìœ„ ë¶€ì—‰ì´",
        "headline": "ê±°ë¶€í˜• Â· ì–µì œí˜• Â· íš¨ëŠ¥ê° ë‚®ìŒ",
        "desc": (
            "ìê¸°ê¸ì •ê³¼ íƒ€ì¸ê¸ì • ëª¨ë‘ ë‚®ì•„ ì„¸ìƒê³¼ ê´€ê³„ë¥¼ ë§¤ìš° ì‹ ì¤‘í•˜ê²Œ ëŒ€í•˜ëŠ” ìœ í˜•ì´ì—ìš”. "
            "ê°ì •ì€ ì–µì œí•˜ê³ , ë„ì „ì  ìƒí™©ì—ì„œëŠ” íšŒí”¼ê°€ ë¹ ë¥´ê²Œ ì¼ì–´ë‚©ë‹ˆë‹¤.\n\n"
            "ê²‰ìœ¼ë¡œëŠ” ì¡°ìš©í•˜ì§€ë§Œ ë‚´ë©´ì—ì„œëŠ” ì‹¤ìˆ˜Â·ìƒì‹¤Â·ë¹„ë‚œì— ëŒ€í•œ ë¶ˆì•ˆì´ í¬ê²Œ ì‘ë™í•©ë‹ˆë‹¤.\n\n"
            "ê´€ê³„ì—ì„œë„ ê³¼ë„í•œ ê¸°ëŒ€ë‚˜ ì˜ì¡´ì€ ì—†ì§€ë§Œ, ê·¸ë§Œí¼ ë„ì›€ì„ ë°›ëŠ” ê²½í—˜ë„ ì ì–´ ìê¸°íš¨ëŠ¥ê°ì´ ë” ë–¨ì–´ì§€ê¸° ì‰¬ì›Œìš”.\n\n"
            "ì´ ìœ í˜•ì€ ì‘ì€ ì„±ê³µ ê²½í—˜ê³¼ â€˜ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í•œ ì‚¬ëŒâ€™ì„ í™•ë³´í•˜ëŠ” ê²ƒì´ ê°€ì¥ í° íšŒë³µ ìš”ì¸ì´ ë©ë‹ˆë‹¤."
        )
    },
}
def get_type_info(base, style, eff):
    key = (base, style, eff)

    if key in TYPE_DB:
        return TYPE_DB[key]

    # fallback (í˜¹ì‹œ DBì— ì—†ëŠ” ì¡°í•©ì¼ ë•Œ)
    return {
        "emoji": "ğŸ¾",
        "name": "ì„ì‹œ ìœ í˜•",
        "headline": f"{base} Â· {style} Â· íš¨ëŠ¥ê° {eff}",
        "desc": "ì´ ìœ í˜•ì— ëŒ€í•œ ì„¤ëª…ì€ ì•„ì§ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤."
    }

# -----------------------------
# ë¬¸í•­ ì •ì˜ (ì „ì²´ ë¬¸í•­)
# - key: ì„¸ì…˜ ì €ì¥ í‚¤
# - text: í‘œì‹œ ë¬¸ì¥
# - scale: ì±„ì ìš© ê·¸ë£¹
# - reverse: ì—­ì±„ì  ì—¬ë¶€(1~7ì—ì„œ 8-x)
#
# ê°ì •ì¡°ì ˆ(ERQ)ì€ Bì•ˆìœ¼ë¡œ êµ¬í˜„:
#   ì–µì œë¬¸í•­(2,4,6,9)ì€ reverse=Trueë¡œ ë‘ê³  scale='erq_expr'
#   -> ì—­ì±„ì  í‰ê·  = 'í‘œí˜„ ì ìˆ˜'(ë†’ì„ìˆ˜ë¡ í‘œí˜„í˜•)
# -----------------------------

QUESTIONS = []

# 1) Self Model
self_pos_texts = [
    "ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë ¤ì•¼ í•  ë•Œ, ë‚˜ëŠ” ëŒ€ë¶€ë¶„ â€œë‚´ê°€ ì˜ í•´ë‚¼ ê±°ì•¼â€ë¼ëŠ” ëŠë‚Œì´ ë“ ë‹¤.",
    "ìƒˆë¡œìš´ ì‚¬ëŒì„ ë§Œë‚  ë•Œ, ìƒëŒ€ê°€ ë‚˜ë¥¼ ê¸ì •ì ìœ¼ë¡œ ë³¼ ê²ƒì´ë¼ëŠ” ê¸°ëŒ€ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë“ ë‹¤.",
    "ì–´ë ¤ìš´ ê³¼ì œê°€ ìƒê¸°ë©´, ì‹œê°„ì´ ê±¸ë ¤ë„ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤ëŠ” ë¯¿ìŒì´ ìƒê¸´ë‹¤.",
    "ëˆ„êµ°ê°€ê°€ ë‚˜ë¥¼ ë¹„íŒí•˜ë”ë¼ë„, ê·¸ ë§ì´ ë‚´ ì „ë°˜ì ì¸ ê°€ì¹˜ê¹Œì§€ í”ë“¤ì§€ëŠ” ì•ŠëŠ”ë‹¤.",
    "ê°€ê¹Œìš´ ì‚¬ëŒê³¼ì˜ ê´€ê³„ì—ì„œ, ë‚˜ëŠ” ì‚¬ë‘ë°›ì„ ë§Œí•œ ì‚¬ëŒì´ë¼ê³  ìì—°ìŠ¤ëŸ½ê²Œ ëŠë‚€ë‹¤.",
]
self_neg_texts = [
    "ì‹¤ìˆ˜ë¥¼ í•˜ë©´ â€œì—­ì‹œ ë‚˜ëŠ” ë¶€ì¡±í•˜ë‹¤â€ë¼ëŠ” ìƒê°ì´ ì‰½ê²Œ ë– ì˜¤ë¥¸ë‹¤.",
    "ê°€ê¹Œìš´ ì‚¬ëŒì´ ì¡°ê¸ˆë§Œ ëƒ‰ë‹´í•´ ë³´ì—¬ë„, ë‚´ê°€ ë­”ê°€ ì˜ëª»í•œ ê±´ ì•„ë‹ê¹Œ ê±±ì •ëœë‹¤.",
    "ìƒëŒ€ì˜ ë§íˆ¬ê°€ ì°¨ê°€ì›Œì§€ë©´, ê¸ˆë°© ë‚´ ê°€ì¹˜ê°€ ë‚®ì•„ì§„ ê²ƒì²˜ëŸ¼ ëŠê»´ì§„ë‹¤.",
    "ëˆ„êµ°ê°€ì—ê²Œ ì‚¬ë‘ë°›ìœ¼ë ¤ë©´, ë‚˜ë¼ëŠ” ì‚¬ëŒ ê·¸ëŒ€ë¡œëŠ” ë¶€ì¡±í•˜ë‹¤ê³  ëŠê»´ì§ˆ ë•Œê°€ ìˆë‹¤.",
    "ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ì‹¤ë§ìŠ¤ëŸ¬ìš´ ë°˜ì‘ì„ ë³´ë©´, ë‚´ê°€ ë¬´ê°€ì¹˜í•´ì§„ ê²ƒì²˜ëŸ¼ ëŠê»´ì§„ë‹¤.",
]

for i, t in enumerate(self_pos_texts, start=1):
    QUESTIONS.append({"key": f"s{i}", "text": t, "scale": "self_pos", "reverse": False})
for j, t in enumerate(self_neg_texts, start=6):
    QUESTIONS.append({"key": f"s{j}", "text": t , "scale": "self_neg", "reverse": True})

# 2) Other Model
other_pos_texts = [
    "ê°€ê¹Œìš´ ì‚¬ëŒì´ ì–´ë ¤ì›€ì„ ê²ªì„ ë•Œ, ë‚˜ë„ ë„ì›€ì„ ë°›ì•˜ë˜ ê¸°ì–µ ë•Œë¬¸ì— ìì—°ìŠ¤ëŸ½ê²Œ ë„ì™€ì£¼ê³  ì‹¶ì–´ì§„ë‹¤.",
    "í˜ë“  ìƒí™©ì¼ ë•Œ ì£¼ë³€ì— ë„ì›€ì„ ìš”ì²­í•˜ë©´, ëŒ€ë¶€ë¶„ ê¸°êº¼ì´ ì‘í•´ì¤€ ê²½í—˜ì´ ìˆë‹¤.",
    "ëŒ€í™”ë¥¼ ë‚˜ëˆŒ ë•Œ, ìƒëŒ€ê°€ ë‚´ ì˜ê²¬ì„ ì¡´ì¤‘í•´ì¤„ ê²ƒì´ë¼ëŠ” ê¸°ëŒ€ê°€ ë“ ë‹¤.",
    "ìƒˆë¡œìš´ ê´€ê³„ì—ì„œë„, ë§ˆìŒì„ ì—´ë©´ ì„œë¡œ ê¸ì •ì ì¸ ë¶„ìœ„ê¸°ê°€ ì‰½ê²Œ ë§Œë“¤ì–´ì§€ëŠ” í¸ì´ë‹¤.",
    "ê°ì •ì ìœ¼ë¡œ í˜ë“¤ë‹¤ëŠ” ì–˜ê¸°ë¥¼ í•˜ë©´, ìƒëŒ€ê°€ ë‹¤ì¹˜ê²Œ í•˜ê¸°ë³´ë‹¤ëŠ” ì´í•´í•˜ë ¤ê³  í•  ê²ƒì´ë¼ ìƒê°í•œë‹¤.",
]
other_neg_texts = [
    "ê°€ê¹Œìš´ ì‚¬ëŒì´ ì—°ë½ì´ ì¡°ê¸ˆë§Œ ëœ¸í•´ì ¸ë„, ê³§ ë‚˜ë¥¼ ë©€ë¦¬í•  ê²ƒ ê°™ì€ ëŠë‚Œì´ ë“ ë‹¤.",
    "ëˆ„êµ°ê°€ì™€ ì •ì„œì ìœ¼ë¡œ ê°€ê¹Œì›Œì§€ê¸° ì‹œì‘í•˜ë©´, â€˜í˜¹ì‹œ ìƒì²˜ë°›ì§€ ì•Šì„ê¹Œâ€™ í•˜ëŠ” ê±±ì •ì´ ìƒê¸´ë‹¤.",
    "ì‚¬ëŒë“¤ì´ ë‚˜ì—ê²Œ í˜¸ì˜ë¥¼ ë³´ì—¬ë„, ì†ìœ¼ë¡œëŠ” ì‹¤ë§ì‹œí‚¤ê±°ë‚˜ ì´ìš©í•  ìˆ˜ë„ ìˆë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤.",
    "ë‚´ ì†ë§ˆìŒì„ ë§ì´ í„¸ì–´ë†“ìœ¼ë©´, ì–¸ì  ê°€ ê·¸ê²ƒ ë•Œë¬¸ì— ë‚˜ë¥¼ ê±°ë¶€í•  ê²ƒ ê°™ì•„ ì¡°ì‹¬í•˜ê²Œ ëœë‹¤.",
    "í˜ë“  ì¼ì´ ìƒê²¼ì„ ë•Œ ëˆ„êµ°ê°€ì—ê²Œ ì˜ì§€í•˜ë ¤ê³  í•˜ë©´, â€˜ì´ëŸ¬ë‹¤ ìƒì²˜ë§Œ ë°›ëŠ” ê±´ ì•„ë‹ê¹Œâ€™ í•˜ëŠ” ê±±ì •ì´ ë¨¼ì € ë“ ë‹¤.",
]

for i, t in enumerate(other_pos_texts, start=11):
    QUESTIONS.append({"key": f"o{i}", "text": t, "scale": "other_pos", "reverse": False})
for j, t in enumerate(other_neg_texts, start=16):
    QUESTIONS.append({"key": f"o{j}", "text": t , "scale": "other_neg", "reverse": True})

# 3) ERQ (ì¬í‰ê°€ + ì–µì œâ†’í‘œí˜„(Bì•ˆ))
# ì¬í‰ê°€: 1,3,5,7,8,10
# ì–µì œ: 2,4,6,9  -> ì—­ì±„ì í•´ì„œ í‘œí˜„ì ìˆ˜
erq_texts = {
    1: "ì¼ì´ ì˜ ì•ˆ í’€ë ¤ ê¸°ë¶„ì´ ê°€ë¼ì•‰ëŠ” ë‚ , ê¸°ë¶„ì„ ì¡°ê¸ˆì´ë¼ë„ ëŒì–´ì˜¬ë¦¬ë ¤ê³  ìƒí™©ì„ ë” ê¸ì •ì ìœ¼ë¡œ í•´ì„í•´ë³´ëŠ” í¸ì´ë‹¤.",
    2: "ì†ìœ¼ë¡œ ê°ì •ì´ í¬ê²Œ í”ë“¤ë ¤ë„, ë‹¤ë¥¸ ì‚¬ëŒì—ê²ŒëŠ” í‰ì†Œì™€ ë‹¤ë¥´ì§€ ì•Šê²Œ ë³´ì´ë„ë¡ í‘œí˜„ì„ ìì œí•˜ëŠ” í¸ì´ë‹¤.",
    3: "ëˆ„êµ°ê°€ì˜ ë§ì´ë‚˜ í–‰ë™ì— ë§ˆìŒì´ ìƒí–ˆì„ ë•Œ, ê·¸ ê°ì •ì„ ëœ ëŠë¼ë ¤ê³  â€˜ê·¸ëŸ´ ìˆ˜ë„ ìˆì§€â€™ì²˜ëŸ¼ ìƒê°ì„ ë°”ê¿”ë³´ë ¤ê³  í•œë‹¤.",
    4: "ì¢‹ì€ ì¼ì´ ìƒê²¨ ê¸°ë¶„ì´ ì¢‹ì•„ë„, ë„ˆë¬´ í‹° ë‚˜ê²Œ í‘œí˜„í•˜ì§€ ì•Šìœ¼ë ¤ê³  ìƒí™©ì„ ë³´ë©° ìŠ¤ìŠ¤ë¡œ ì¡°ì ˆí•˜ëŠ” í¸ì´ë‹¤.",
    5: "ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë¶€ë‹´ì´ë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì´ ë‹¥ì¹˜ë©´, ë§ˆìŒì´ ë” ë¶ˆì•ˆí•´ì§€ì§€ ì•Šë„ë¡ ìƒí™©ì„ ì°¨ë¶„í•˜ê²Œ ë³¼ ìˆ˜ ìˆëŠ” ë°©í–¥ìœ¼ë¡œ ë‹¤ì‹œ ìƒê°í•´ë³´ë ¤ í•œë‹¤.",
    6: "ê°ì •ì´ ê²©í•´ì§€ëŠ” ìˆœê°„ì—ë„, í‘œì •ì´ë‚˜ ë§ë¡œ ë“œëŸ¬ë‚´ì§€ ì•Šê³  ë„˜ê¸°ë©° ìŠ¤ìŠ¤ë¡œ ê°ì •ì„ ì¡°ì ˆí•˜ë ¤ëŠ” í¸ì´ë‹¤.",
    7: "í•˜ë£¨ê°€ ì§€ì¹˜ê³  ë‹¤ìš´ë  ë•Œ, ì§€ê¸ˆ ìƒí™©ì—ì„œ ì¢‹ì€ ì ì´ë‚˜ ì˜ë¯¸ë¥¼ ì¼ë¶€ëŸ¬ ì°¾ì•„ë³´ë©° ê¸°ë¶„ì„ ì „í™˜í•˜ë ¤ í•œë‹¤.",
    8: "ëˆ„êµ°ê°€ì™€ ê°ˆë“±ì´ ìƒê¸°ê±°ë‚˜ ë§ˆìŒì´ í”ë“¤ë¦¬ëŠ” ìˆœê°„, ê°ì •ì„ ë‹¤ìŠ¤ë¦¬ê¸° ìœ„í•´ ê·¸ ìƒí™©ì„ ë‹¤ë¥¸ ê´€ì ì—ì„œ ë‹¤ì‹œ í•´ì„í•´ë³´ë ¤ í•œë‹¤.",
    9: "ì§œì¦ì´ë‚˜ ìŠ¬í””ì´ ìƒê²¨ë„, ìƒëŒ€ì—ê²Œ í‹° ë‚˜ì§€ ì•Šë„ë¡ í‘œì •ì´ë‚˜ ë§ë¡œ ë“œëŸ¬ë‚´ì§€ ì•Šìœ¼ë ¤ ì¡°ì‹¬í•˜ëŠ” í¸ì´ë‹¤.",
    10:"ì‹¤ë§ìŠ¤ëŸ½ê±°ë‚˜ ë‹µë‹µí•œ ì¼ì´ ìƒê¸°ë©´, ë¶€ì •ì ì¸ ê°ì •ì„ ëœ ëŠë¼ê¸° ìœ„í•´ ê·¸ ìƒí™©ì„ ëœ ì‹¬ê°í•˜ê²Œ ë°”ë¼ë³´ë ¤ í•œë‹¤.",
}
reappraisal_set = {1,3,5,7,8,10}
suppression_set = {2,4,6,9}

for k in range(1, 11):
    if k in reappraisal_set:
        QUESTIONS.append({"key": f"e{k}", "text": erq_texts[k], "scale": "erq_reapp", "reverse": False})
    else:
        # Bì•ˆ: ì–µì œë¬¸í•­ì„ ì—­ì±„ì  -> í‘œí˜„ ì ìˆ˜
        QUESTIONS.append({"key": f"e{k}", "text": erq_texts[k] 
                          
                          
                        , "scale": "erq_expr", "reverse": True})

# 4) ìê¸°íš¨ëŠ¥ê° 10ë¬¸í•­
eff_texts = [
    "ìƒˆë¡œìš´ ê³¼ì œë‚˜ ì–´ë ¤ìš´ ì¼ì´ ì£¼ì–´ì§€ë©´, ì‹¤íŒ¨ ê°€ëŠ¥ì„±ì´ ìˆì–´ë„ ì¼ë‹¨ ì‹œë„í•´ë³´ëŠ” í¸ì´ë‹¤.",
    "ì¼ì´ ì˜ í’€ë¦¬ì§€ ì•Šì„ ë•Œë„, â€˜ì¡°ê¸ˆ ë” í•´ë³´ë©´ í•´ê²°í•  ìˆ˜ ìˆë‹¤â€™ëŠ” ìƒê°ìœ¼ë¡œ ê³„ì† ë°€ê³  ë‚˜ê°„ë‹¤.",
    "ì´ì „ì— ë¹„ìŠ·í•œ ì¼ì„ í•´ëƒˆë˜ ê²½í—˜ì´ ìˆìœ¼ë©´, ì´ë²ˆì—ë„ ì˜ í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ëŠ” ìì‹ ê°ì´ ìƒê¸´ë‹¤.",
    "ë‹¤ë¥¸ ì‚¬ëŒì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëª¨ìŠµì„ ë³´ë©´, â€˜ë‚˜ë„ ì €ë ‡ê²Œ í•  ìˆ˜ ìˆê² ë‹¤â€™ëŠ” ë§ˆìŒì´ ë“ ë‹¤.",
    "ì£¼ë³€ì—ì„œ â€˜ë„ˆë¼ë©´ í•  ìˆ˜ ìˆì–´â€™ë¼ëŠ” ë§ì„ ë“¤ìœ¼ë©´ ì‹¤ì œë¡œ ëŠ¥ë ¥ì´ ì»¤ì§„ ê²ƒì²˜ëŸ¼ ëŠê»´ì§„ë‹¤.",
    "ê¸´ì¥ë˜ê±°ë‚˜ ë¶ˆì•ˆí•œ ìƒíƒœì—ì„œë„, ê°ì •ì„ ì–´ëŠ ì •ë„ ì¡°ì ˆí•˜ë©° ê³¼ì œë¥¼ ì´ì–´ê°ˆ ìˆ˜ ìˆë‹¤.",
    "ë¶€ë‹´ìŠ¤ëŸ½ê±°ë‚˜ ë‘ë ¤ìš´ ìƒí™©ì—ì„œë„, í”¼í•˜ê¸°ë³´ë‹¤ ì§ì ‘ ë¶€ë”ªí˜€ í•´ê²°í•˜ë ¤ëŠ” í¸ì´ë‹¤.",
    "ë³µì¡í•œ ë¬¸ì œë¥¼ ë§ˆì£¼í•˜ë©´, í•´ê²° ë°©ë²•ì„ ì°¾ì•„ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ê¸°ëŒ€ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë– ì˜¤ë¥¸ë‹¤.",
    "ëˆ„êµ°ê°€ê°€ ë‚´ ì‘ì—…ì— ì¡°ì–¸ì„ í•˜ë©´, ë¹„íŒë³´ë‹¤ëŠ” â€˜ëŠ¥ë ¥ì„ ë” í‚¤ìš¸ ê¸°íšŒâ€™ë¼ê³  ëŠë‚€ë‹¤.",
    "ì—¬ëŸ¬ ë²ˆ ì‹¤íŒ¨í•˜ë”ë¼ë„, ê·¸ ì‹¤íŒ¨ê°€ ë‚´ ëŠ¥ë ¥ ì „ì²´ë¥¼ ì˜ë¯¸í•œë‹¤ê³  ìƒê°í•˜ì§€ ì•ŠëŠ”ë‹¤.",
]
for i, t in enumerate(eff_texts, start=1):
    QUESTIONS.append({"key": f"g{i}", "text": t, "scale": "eff", "reverse": False})

# -----------------------------
# ì ìˆ˜ ê³„ì‚°
# -----------------------------
def get_vals(scale, answers):
    vals = []
    for q in QUESTIONS:
        if q["scale"] == scale:
            v = answers.get(q["key"], 4)
            if q["reverse"]:
                v = rev7(v)
            vals.append(v)
    return vals
def get_vals_raw(scale, answers):
    """reverse ì—¬ë¶€ ìƒê´€ì—†ì´ ì›ì ìˆ˜(1~7)ë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ê¸°"""
    vals = []
    for q in QUESTIONS:
        if q["scale"] == scale:
            v = answers.get(q["key"], 4)
            vals.append(v)
    return vals
def safe_mean(xs):
    xs = [x for x in xs if x is not None]
    return sum(xs) / len(xs) if xs else 0.0

def internal_ratio(pos_vals, neg_raw_vals, eps=1e-9):
    """ë‚´ë¶„ì : pos / (pos + neg)  -> 0~1"""
    P = safe_mean(pos_vals)
    N = safe_mean(neg_raw_vals)
    return P / (P + N + eps)

def internal_ratio_pct(pos_vals, neg_raw_vals, eps=1e-9):
    return internal_ratio(pos_vals, neg_raw_vals, eps) * 100

def base_type(self_m, other_m):
    x = self_m >= 50  # ìê¸° ê¸ì • ìš°ì„¸(ë¹„ìœ¨)
    y = other_m >= 50 # íƒ€ì¸ ê¸ì • ìš°ì„¸(ë¹„ìœ¨)
    if x and y: return "ì•ˆì •í˜•"
    if (not x) and y: return "ë¶ˆì•ˆí˜•"
    if x and (not y): return "íšŒí”¼í˜•"
    return "ê±°ë¶€í˜•"

# -----------------------------
# í˜ì´ì§€ ì „í™˜
# -----------------------------
if "page" not in st.session_state:
    st.session_state.page = "survey"

def go_result():
    st.session_state.page = "result"
    st.rerun()

def go_survey():
    st.session_state.page = "survey"
    st.rerun()

# -----------------------------
# ì„¤ë¬¸ ìˆœì„œ: 1íšŒ ì…”í”Œ ê³ ì •(ì›í•˜ë©´ ì œê±° ê°€ëŠ¥)
# -----------------------------
if "order" not in st.session_state:
    order = list(range(len(QUESTIONS)))
    random.shuffle(order)
    st.session_state.order = order

# -----------------------------
# UI: Survey
# -----------------------------
def render_survey():
    st.title("ì„±í–¥ í”„ë¡œí•„ (ì„¤ë¬¸)")
    st.caption("1(ì „í˜€ ì•„ë‹ˆë‹¤) ~ 7(ë§¤ìš° ê·¸ë ‡ë‹¤)")

    for i, idx in enumerate(st.session_state.order, start=1):
        q = QUESTIONS[idx]

        # ì§ˆë¬¸ ë²ˆí˜¸ + í…ìŠ¤íŠ¸
        st.markdown(f"**{i}. {q['text']}**")

        # ì‘ë‹µ (ë¼ë””ì˜¤ëŠ” ë¼ë²¨ ìˆ¨ê¹€)
        st.radio(
            label="",
            options=[1, 2, 3, 4, 5, 6, 7],
            horizontal=True,
            key=q["key"]
        )

        st.markdown("---")

    if st.button("ë‹¤ìŒ â–¶", use_container_width=True):
        go_result()


# -----------------------------
# UI: Result
# -----------------------------
st.markdown("<a name='top'></a>", unsafe_allow_html=True)

def render_result():
    st.title("ì„±í–¥ í”„ë¡œí•„ (ê²°ê³¼)")

    # -----------------------------
    # 1) ë‹µ ëª¨ìœ¼ê¸°
    # -----------------------------
    answers = {q["key"]: st.session_state.get(q["key"], 4) for q in QUESTIONS}

    # -----------------------------
    # 2) ìê¸° / íƒ€ì¸ ë‚´ë¶„ì  ë¹„ìœ¨ (0~100)
    # -----------------------------
    self_pos = get_vals("self_pos", answers)          # ìê¸° ê¸ì • (ì—­ì±„ì  ì ìš© O)
    self_neg_raw = get_vals_raw("self_neg", answers) # ìê¸° ë¶€ì • (ì›ì ìˆ˜)
    other_pos = get_vals("other_pos", answers)
    other_neg_raw = get_vals_raw("other_neg", answers)

    self_model  = internal_ratio(self_pos, self_neg_raw) * 100
    other_model = internal_ratio(other_pos, other_neg_raw) * 100

    # -----------------------------
    # 3) ë‚˜ë¨¸ì§€ ì ìˆ˜ (ê¸°ì¡´ ë°©ì‹ ìœ ì§€)
    # -----------------------------
    expression  = mean(get_vals("erq_expr", answers))
    reappraisal = mean(get_vals("erq_reapp", answers))
    efficacy    = mean(get_vals("eff", answers))

    # -----------------------------
    # 4) ìœ í˜• ë¶„ë¥˜
    # -----------------------------
    base = base_type(self_model, other_model)     # 50% ê¸°ì¤€
    style = "í‘œí˜„í˜•" if expression >= CUT else "ì–µì œí˜•"
    eff = "ë†’ìŒ" if efficacy >= CUT else "ë‚®ìŒ"

    info = get_type_info(base, style, eff)

    # -----------------------------
    # 5) íƒ€ì… ì¹´ë“œ
    # -----------------------------
    st.subheader(f"{info['emoji']} {info['name']}")
    st.caption(info["headline"])
    st.write(info["desc"])

    # -----------------------------
    # 6) ì‚¬ë¶„ë©´ (ë¹„ìœ¨ ê¸°ë°˜)
    # -----------------------------
    st.write("ì• ì°© ì˜ì—­")

    fig, ax = plt.subplots(figsize=(7, 4.2))
    ax.set_xlim(0, 100)
    ax.set_ylim(0, 100)

    # (1) ë°”ê¹¥ í…Œë‘ë¦¬ / ëˆˆê¸ˆ ì œê±°
    for spine in ax.spines.values():
        spine.set_visible(False)

    ax.set_xticks([])
    ax.set_yticks([])

    # (2) ì¤‘ì•™ ì‹­ì ì¶•
    ax.axvline(50, color="black", linewidth=2.0, zorder=1)
    ax.axhline(50, color="black", linewidth=2.0, zorder=1)

    # (3) ì‚¬ë¶„ë©´ ë¼ë²¨
    ax.text(
        25, 75, "ì•ˆì •í˜•",
        ha="center", va="center",
        fontproperties=FP, fontsize=16
    )
    ax.text(
        75, 75, "ì˜ì¡´í˜•",
        ha="center", va="center",
        fontproperties=FP, fontsize=16
    )
    ax.text(
        25, 25, "ê±°ë¶€í˜•",
        ha="center", va="center",
        fontproperties=FP, fontsize=16
    )
    ax.text(
        75, 25, "íšŒí”¼í˜•",
        ha="center", va="center",
        fontproperties=FP, fontsize=16
    )

    # (4) ì¶• ì„¤ëª… í…ìŠ¤íŠ¸
    ax.text(
        -10, 50, "íƒ€ì¸ì—\nëŒ€í•œ\nìƒê°",
        ha="center", va="center",
        fontproperties=FP, fontsize=18,
        rotation=90
    )

    # yì¶• ìœ„/ì•„ë˜: ê¸ì •/ë¶€ì • (ì„¸ë¡œë¡œ)
    ax.text(
        -10, 92, "ê¸ì •ì ",
        ha="center", va="center",
        fontproperties=FP, fontsize=12,
        rotation=90
    )
    ax.text(
        -10, 8, "ë¶€ì •ì ",
        ha="center", va="center",
        fontproperties=FP, fontsize=12,
        rotation=90
    )

    # ì•„ë˜ ê°€ë¡œ: ìì‹ ì— ëŒ€í•œ ìƒê°
    ax.text(
        50, -12, "ìì‹ ì—\nëŒ€í•œ\nìƒê°",
        ha="center", va="center",
        fontproperties=FP, fontsize=18
    )

    # xì¶• ì¢Œ/ìš°: ë¶€ì •/ê¸ì •
    ax.text(
        8, -12, "ë¶€ì •ì ",
        ha="left", va="center",
        fontproperties=FP, fontsize=12
    )
    ax.text(
        92, -12, "ê¸ì •ì ",
        ha="right", va="center",
        fontproperties=FP, fontsize=12
    )
    # (5) ì‚¬ìš©ì ìœ„ì¹˜ ì 
    ax.scatter(
        [self_model],
        [other_model],
        s=260,
        color="#F28C28",
        edgecolors="white",
        linewidths=2.5,
        zorder=3
    )

    plt.tight_layout()
    st.pyplot(fig)


    # -----------------------------
    # 7) ë³´ì¡° ì§€í‘œ (ì–‘ìª½ ëŒ€ë¹„ìƒ‰ + ì–‘ìª½ %í‘œì‹œ, ì ìˆ˜ ë¬¸ì¥ ì œê±°)
    # -----------------------------
    def score_to_pct_0_100(score_1_7: float) -> int:
        # 1~7 -> 0~100
        return int(round((score_1_7 - 1) / 6 * 100))

    def draw_dual_bar(ax, pct_left, left_end_label, right_end_label, title, font_prop):
        """
        pct_left: ì™¼ìª½(í˜„ì¬ê°’) í¼ì„¼íŠ¸ 0~100
        ì˜¤ë¥¸ìª½ì€ ìë™ìœ¼ë¡œ 100 - pct_left
        """
        pct_left = max(0, min(100, int(pct_left)))
        pct_right = 100 - pct_left

        ax.set_xlim(0, 100)
        ax.set_ylim(0, 1)
        ax.axis("off")

        # ë‘ê»˜
        bar_h = 0.42
        y = 0.5

        # ìƒ‰(ì›í•˜ì‹œë©´ ì—¬ê¸°ë§Œ ë°”ê¿”ì„œ í…Œë§ˆ ë§ì¶”ë©´ ë¨)
        left_color = "#F28C28"   # ì£¼í™© (ì±„ì›€)
        right_color = "#D7EAF6"  # ëŒ€ë¹„ë˜ëŠ” í•˜ëŠ˜ìƒ‰(ë‚˜ë¨¸ì§€)

        # ì™¼ìª½/ì˜¤ë¥¸ìª½ ë°”(ë‘˜ ë‹¤ ì±„ì›€)
        ax.barh([y], [pct_left], height=bar_h, left=0, zorder=2, color=left_color)
        ax.barh([y], [pct_right], height=bar_h, left=pct_left, zorder=1, color=right_color)

        # íƒ€ì´í‹€(ìœ„)
        ax.text(
            0, 1.05, title,
            ha="left", va="bottom",
            fontproperties=font_prop, fontsize=14
        )

        # ëë‹¨ ë¼ë²¨(ì•„ë˜)
        ax.text(
            0, -0.15, left_end_label,
            ha="left", va="top",
            fontproperties=font_prop, fontsize=11
        )
        ax.text(
            100, -0.15, right_end_label,
            ha="right", va="top",
            fontproperties=font_prop, fontsize=11
        )

        # í¼ì„¼íŠ¸ í…ìŠ¤íŠ¸ (ì¢Œì¸¡/ìš°ì¸¡ ëª¨ë‘)
        # ì™¼ìª½ í¼ì„¼íŠ¸ëŠ” ì™¼ìª½ ë°” ì•ˆì—
        if pct_left >= 10:
            ax.text(
                pct_left - 2, y, f"{pct_left}%",
                ha="right", va="center",
                fontproperties=font_prop, fontsize=13,
                color="white", zorder=3
            )
        else:
            ax.text(
                pct_left + 2, y, f"{pct_left}%",
                ha="left", va="center",
                fontproperties=font_prop, fontsize=13,
                color="black", zorder=3
            )

        # ì˜¤ë¥¸ìª½ í¼ì„¼íŠ¸ëŠ” ì˜¤ë¥¸ìª½ ë°” ì•ˆì—(ìš°ì¸¡ ë ê¸°ì¤€)
        if pct_right >= 10:
            ax.text(
                100 - 2, y, f"{pct_right}%",
                ha="right", va="center",
                fontproperties=font_prop, fontsize=13,
                color="#2B2B2B", zorder=3
            )
        else:
            ax.text(
                pct_left + pct_right + 2, y, f"{pct_right}%",
                ha="left", va="center",
                fontproperties=font_prop, fontsize=13,
                color="#2B2B2B", zorder=3
            )

    expr_pct = score_to_pct_0_100(expression)
    eff_pct  = score_to_pct_0_100(efficacy)

    # (A) ì–µì œ â†” í‘œí˜„ (í‘œí˜„ ì ìˆ˜ %)
    fig1, ax1 = plt.subplots(figsize=(10, 1.5))
    draw_dual_bar(
        ax1,
        pct_left=expr_pct,
        left_end_label="ì–µì œ",
        right_end_label="í‘œí˜„",
        title="ì–µì œ â†” í‘œí˜„ (í‘œí˜„ ì ìˆ˜)",
        font_prop=FP
    )
    st.pyplot(fig1)

    # (B) ìê¸°íš¨ëŠ¥ê° ë‚®ìŒ â†” ë†’ìŒ
    fig2, ax2 = plt.subplots(figsize=(10, 1.5))
    draw_dual_bar(
        ax2,
        pct_left=eff_pct,
        left_end_label="ìê¸°íš¨ëŠ¥ê° ë‚®ìŒ",
        right_end_label="ìê¸°íš¨ëŠ¥ê° ë†’ìŒ",
        title="ìê¸°íš¨ëŠ¥ê°",
        font_prop=FP
    )
    st.pyplot(fig2)

 

    # -----------------------------
    # 8) ë²„íŠ¼
    # -----------------------------
    col1, col2 = st.columns(2)

    with col1:
        if st.button("â—€ ë‹¤ì‹œ ì„¤ë¬¸", use_container_width=True):
            go_survey()

    with col2:
        if st.button("ì‘ë‹µ ì´ˆê¸°í™”", use_container_width=True):
            for q in QUESTIONS:
                if q["key"] in st.session_state:
                    del st.session_state[q["key"]]
            go_survey()

# -----------------------------
# ë¼ìš°íŒ…
# -----------------------------
if st.session_state.page == "survey":
    render_survey()
else:
    render_result()
